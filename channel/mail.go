package channel

import (
    "gopkg.in/gomail.v2"
)


func SendMail(from string, to string, host string, port int, username string, password string , url string) {
    m := gomail.NewMessage()
    m.SetAddressHeader("From", from, "")  // 发件人
    m.SetHeader("To",  // 收件人
        m.FormatAddress(to, ""),
    )
    m.SetHeader("Subject", "新的CVE推送")  // 主题
    m.SetBody("text/html", "新的CVE地址 <a href = "+url+">github地址</a>")  // 正文

    d := gomail.NewPlainDialer(host, port, username, password)  // 发送邮件服务器、端口、发件人账号、发件人密码
    if err := d.DialAndSend(m); err != nil {
        panic(err)
    }
}
